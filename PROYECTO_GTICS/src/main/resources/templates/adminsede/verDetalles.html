<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec = "http://www.thymeleaf.org/extras/spring-security">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <link rel="icon" type="image/x-icon" th:href="@{/favicon.png}">

        <!--=============== REMIXICONS ===============-->
        <link href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css" rel="stylesheet">
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/a2dd6045c4.js" crossorigin="anonymous"></script>

        <!--=============== CSS ===============-->
        <link th:href="@{/css/styles.css}" rel="stylesheet" />
        <link th:href="@{/css/fonts.css}" rel="stylesheet" />
        <link rel="stylesheet" th:href="@{/css/farmacista/farmacista.css}">
        <link rel="stylesheet" th:href="@{/css/farmacista/detalle_ordenes.css}">
        <link th:href="@{/css/notificaciones.css}" rel="stylesheet" />
        <link th:href="@{/css/footer.css}" rel="stylesheet" />
        <link th:href="@{/css/topbar.css}" rel="stylesheet" />
        <link th:href="@{/css/preloader.css}" rel="stylesheet" />

        <link rel="stylesheet" th:href="@{/css/adminsede/indexstyle.css}">

        <!--Mapa vista Paciente-->
        <script scr="/js/map.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAce4klBZuD60aEQidMVIbsoaiitxxQFpo"></script>

        <!--=============== JQUERY ===============-->
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

        <!--=============== SWEETALERT ===============-->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.7/dist/sweetalert2.all.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.7/dist/sweetalert2.min.css" rel="stylesheet">

        <!--=============== FONT AWESOME ===============-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"  integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
        <script src="https://kit.fontawesome.com/a2dd6045c4.js" crossorigin="anonymous"></script>

        <style>
            .btn-c {
                display: inline-block;
                padding: 12px 20px;
                color:white;
                background-color: #d525ad;
                text-decoration: none;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s, border-color 0.3s;
                font-size: 17px;
            }
            .btn-n {
                display: inline-block;
                padding: 12px 20px;
                color:white;
                background-color: #1a72e7;
                text-decoration: none;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s, border-color 0.3s;
                font-size: 17px;
            }
            .alert {
                padding: 15px;
                margin-bottom: 20px;
                border: 1px solid transparent;
                border-radius: 4px;
            }

            .alert-success {
                color: #155724;
                background-color: #d4edda;
                border-color: #c3e6cb;
            }
            @import url('https://fonts.googleapis.com/css2?family=Aptos:wght@700&display=swap');

        </style>




        <title>Bienestar San Miguel | Orden de reposición</title>

    </head>
    <body class="loader-hidden">

    <header class="header-topbar">
        <nav th:replace="~{fragments/navbar.html :: navbar( active = 'Inicio')}"></nav>
    </header>


    <div th:replace="~{fragments/banner.html :: banner}"></div>

    <div class="container-loader loader-hidden" id="onload">
        <div class="loader"></div>
    </div>

        <div class="container" >

            <div style="padding-top: 20px; padding-bottom: 20px">
                <div class="main-title open-sans-bold"> Detalle de Orden de Reposición </div>
            </div>

            <hr class="style-one">

            <div th:if="${msg != null}" th:text="${msg}" class="alert alert-success" role="alert" style="margin-top: 30px"></div>

            <div class="detalle-orden-container">

                <div class="invoice-title">

                    <div class="title roboto-medium data-label">Bienestar San Miguel | <span th:text="${sede.getNombre()}">Sede</span></div>

                    <div class="title-info">
                        <div class="roboto-bold title data-label">Orden #<span th:text="${reposicion.getNumero()}"></span> </div>
                        <div th:text="Recibido" class="badge badge-recibido"></div>
                    </div>
                </div>

                <div class="invoice-contact">

                    <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">Dirección:</span><div th:text="${sede.getDireccion()}">Aldoradin</div></div>
                    <div><span class="data-label roboto-medium">Correo:</span> clinica.bienestar@sanmiguel.pe</div>
                    <div><span class="data-label roboto-medium">Número:</span> +51 998524112</div>
                </div>

                <hr class="my-4" style="margin-bottom: 20px; margin-top: 20px;">

                <div class="client-info">
                    <div class="data-label roboto-medium">Datos del Administrador:</div>
                    <div class="invoice-data">
                        <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">Nombre: </span><div th:text="${administradorMostrar.getNombres() + ' ' + administradorMostrar.getApellidos()}"> Leonardo Ernesto Aldoradin Yaranga</div></div>
                        <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">DNI:</span><div th:text="${administradorMostrar.getDni()}"> Aldoradin</div></div>
                        <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">Correo:</span><div th:text="${administradorMostrar.getCorreo()}"> Aldoradin</div></div>
                    </div>
                </div>

                <hr class="my-4" style="margin-bottom: 20px; margin-top: 20px;">

                <div class="invoice-info">
                    <div class="data-label roboto-medium">Datos de la Orden de reposición:</div>

                    <div class="invoice-data">
                        <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">Número de Orden: </span><div th:text="${reposicion.getNumero()}"> Aldoradin</div></div>
                        <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">Fecha:</span><div th:text="${reposicion.getFechaIni()}">Aldoradin </div></div>
                        <div style="display: flex; flex-direction: row; gap: 3px;"><span class="data-label roboto-medium">Sede:</span><div th:text="${sede.getNombre()}"> Aldoradin</div></div>
                    </div>
                </div>

                <hr class="my-4" style="margin-bottom: 50px; margin-top: 20px;">

                <div class="title roboto-medium data-label" style="padding-bottom: 20px">Lista de Medicamentos Comprados</div>

                <div>
                    <table class="order-table">
                        <thead style="padding-bottom: 10px">
                            <tr>
                                <th class="text-start" style="max-width: 90px;">No.</th>
                                <th class="text-start" style="max-width: 200px;">Artículo</th>
                                <th class="text-center">Precio</th>
                                <th class="text-center">Cantidad</th>
                                <th class="text-end" style="width: 120px;">Total</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr th:each="compra, iterIndex : ${listaMostrarNuevaCompra}">
                                <th class="text-start" style="width: 90px;"><span th:text="${iterIndex.index + 1}"></span></th>
                                <td>
                                    <div class="name-unit-item">
                                        <div class="text-truncate font-size-14 mb-1" th:text="${compra.getNombre()}">Panadol</div>
                                        <div class="text-muted mb-0" th:text="${compra.getUnidad()}">TABLETAS 50 U.</div>
                                    </div>
                                </td>
                                <td class="text-center" th:text="${'S/. ' + #numbers.formatDecimal(compra.getPrecioCompra(), 1, 'COMMA', 2, 'POINT')}">$ 245.50</td>
                                <td class="text-center" th:text="${compra.getCantidad()}">1</td>
                                <td class="text-end" th:text="${'S/. ' + #numbers.formatDecimal(compra.getCantidad() * compra.getPrecioCompra(), 1, 'COMMA', 2, 'POINT')}">$ 245.50</td>
                            </tr>
                        </tbody>

                    </table>
                </div>

                <div class="full-total">
                    <div class="roboto-regular data-label" style="padding-top: 20px">Total</div>
                    <div class="title roboto-medium data-label" th:text="${'S/. ' + #numbers.formatDecimal(reposicion.getPrecioTotal(), 1, 'COMMA', 2, 'POINT')}">S/. 750.00</div>
                </div>

                <div class="container-graph-circular">
                    <button class="btn-p" type="button" onclick="window.location.href = '/adminsede/medicamentos'" style="margin-left: 20px">Finalizar</button>
                </div>

            </div>

        </div>

        <div th:replace="~{fragments/navbar.html :: footer}">
        </div>
        <script>
            $(document).ready(function() {
                let opened = false;

                $('#menu-small').hide();

                $('#nav-toggle').click(function (e) {
                    e.stopPropagation();
                    if (opened) {
                        $('#menu-small').hide();
                    } else {
                        $('#menu-small').show();
                    }
                    opened = !opened;
                });
            });
        </script>

        <script>
            // Puntos del mapa

            const locations = [
                { lat: -12.067713, lng: -77.067505 },
                { lat: -12.067739299285414, lng: -77.07048533833166 },
                { lat: -12.067991537715104, lng: -77.07550755645634 },
                { lat : -12.068533248724986, lng: -77.07808532986617},
                { lat: -12.069724275588285, lng: -77.07804924250952}
            ]


            // Inicializar mapa
            function initMap() {
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 16,
                    center: locations[0],
                });

                // Crear marcador
                const marker = new google.maps.Marker({
                    position: locations[0],
                    map: map,
                    icon: {
                        url: "../img/moto_icon.png", // Ruta de la imagen de la moto
                        scaledSize: new google.maps.Size(55, 50) // Tamaño personalizado (ancho, alto)
                    } // Ruta de la imagen de la moto
                });

                // Mover el marcador a través de los puntos

                let i = 0;
                const interval = setInterval(() => {
                    i++;
                    if (i >= locations.length) {
                        clearInterval(interval); // Detener el intervalo cuando llega a la tercera posición
                        return;
                    }
                    marker.setPosition(locations[i]);
                }, 2000); // Cambia de ubicación cada 3 segundos

            }

        </script>



        <script>
            window.onload = function () {
                $('#onload').fadeOut();
                $('body').removeClass('loader-hidden');
            }

        </script>

    </body>



</html>
