<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Bienestar San Miguel | Login</title>


    <link rel="icon" type="image/x-icon" th:href="@{/media/favicon.png}">
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
    <link th:href="@{/css/fonts.css}" rel="stylesheet" />
    <link th:href="@{/css/login-styles/login.css}" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<header>
    <div class="login-top">
        <div>
            <a href="/"><img class="logo" th:src="@{/media/logo_large_2.png}" alt="Logo"></a>
        </div>

        <div class="top-menu">
            <a class="text menu-item roboto-regular" href="">Preguntas Frecuentes →</a>
            <a class="text menu-item roboto-regular" href="">Manual de Usuario →</a>
            <a class="text menu-item roboto-regular" href="https://munisanmiguel.gob.pe/#">Directorio de Servicios →</a>
        </div>
    </div>

</header>

<body>
<script th:if="${logoutMessage != null}">

        let timerInterval;

        Swal.fire({
            html: '<p style="color:#34ADE6;font-size:30px;font-weight: bold">!LA SESIÓN SE CERRÓ EXITOSAMENTE!</p><img src="/img/logout_check.gif" alt="Descripción del GIF">',
            timer: 3430,
            showConfirmButton: false,
            backdrop: `
              white
              center
              no-repeat
          `,
            didOpen: () => {
                const timer = Swal.getPopup().querySelector("b");
                timerInterval = setInterval(() => {
                    timer.textContent = `${Swal.getTimerLeft()}`;
                }, 100);
            },
            willClose: () => {
                clearInterval(timerInterval);
            }
        }).then((result) => {
            /* Read more about handling dismissals below */
            if (result.dismiss === Swal.DismissReason.timer) {
                console.log("I was closed by the timer");
            }
        });



</script>
    <div class="main-container">
        <div class="login-container">

            <div class="wrapper">
                <div class="login-title montserrat-bold">Iniciar Sesión</div>

                <p class="text text-normal">¿No tiene cuenta? <span>  &#160 <a th:href="@{/new}" class="text text-links">Registrarse</a></span></p>

                <!--
                <div th:if="${logoutMessage != null}" class="alert alert-danger-custom" role="alert">
                    <p th:text="${logoutMessage}"></p>
                </div> -->

                <div class="alert alert-success-custom" role="alert" th:if="${mensaje != null}" th:text="${mensaje}" ></div>
                <div class="alert alert-danger-custom" role="alert" th:if="${error != null}" th:text="${error}"></div>
                <form name="signin" class="login-form" method="post" th:action="@{/processlogin}" th:object="${usuario}">
                    <div class="input-control3">
                        <label for="correo" class="input-label" hidden>Email Address</label>
                        <input type="email" name="correo" th:field="*{correo}" id="correo" class="input-field" placeholder="Correo Electrónico">
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('correo')}" th:errors="*{correo}" style="margin-left: 10px ; color: red"></div>
                    </div>
                    <div class="input-control3">
                        <label for="contrasena" class="input-label" hidden>Password</label>
                        <input type="password" name="contrasena" th:field="*{contrasena}" id="contrasena" class="input-field" placeholder="Contraseña">
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('contrasena')}" th:errors="*{contrasena}" style="margin-left: 10px ; color: red"></div>
                    </div>
                    <div class="input-control">
                        <a th:href="@{/recuperarContra}" class="text text-links">Recuperar Contraseña</a>
                        <input type="submit" name="submit" class="input-submit" value="Iniciar Sesión">
                    </div>
                </form>
                <h4 th:if="${param.error}" class="form-signin-heading" style="color:red">Acceso denegado</h4>
            </div>

        </div>
    </div>



</body>

</html>